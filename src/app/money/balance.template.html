<div>
    <strong>Balance</strong>

    <span class="field">
        <label for="fMonth" class="label-left">Year-Month</label>
        <select [(ngModel)]="model.iterable" name="fMonth" id="fMonth" (change)="reloadBalance()">
            <option *ngFor="let opt of viewData.monthList" value="{{opt.iterable}}">{{opt.name}}</option>
        </select>

        <br/>
        <input name="fFilterNonZero" id="fFilterNonZero" type="checkbox" (click)="toggleFilterNonZero()" [(ngModel)]="viewData.filterNonZero" />
        <label for="fFilterNonZero">Filter Non Zero Balance</label>
    </span>

    <table>
        <tr>
            <th>Account</th>
            <th>Initial</th>
            <th>Charges</th>
            <th>Withdrawals</th>
            <th>Final</th>
            <th>Actions</th>
        </tr>
        <tr *ngFor="let b of viewData.monthBalance" class="balance-row">
            <td>{{b.bal_txt_account}}</td>
            <td class="currency-cell-right">{{b.bal_initial | currency:'MXN':'symbol-narrow':'1.2-2'}}</td>
            <td class="currency-cell-right">{{b.bal_charges | currency:'MXN':'symbol-narrow':'1.2-2'}}</td>
            <td class="currency-cell-right">{{b.bal_withdrawals | currency:'MXN':'symbol-narrow':'1.2-2'}}</td>
            <td class="currency-cell-right" [ngClass]="{'balance-zero': b.bal_final == 0, 'balance-positive': b.bal_final > 0, 'balance-negative': b.bal_final < 0}">
                {{b.bal_final | currency:'MXN':'symbol-narrow':'1.2-2'}}
            </td>
            <td><a href="#" (click)="renderMovements(b, $event)">View Movements</a></td>
        </tr>
    </table>

    <table *ngIf="viewData.movements.length">
        <tr>
            <th>Id</th>
            <th>Date</th>
            <th>Account</th>
            <th>Account To</th>
            <th>Type</th>
            <th>Amount</th>
            <th>Budget</th>
            <th>Category</th>
            <th>Place</th>
            <th>Description</th>
            <th>Notes</th>
            <th>Status</th>
        </tr>
        <tr *ngFor="let m of viewData.movements">
            <td>{{m.mov_id}}</td>
            <td>{{m.mov_date | date: 'yyyy-MM-dd'}}</td>
            <td>{{m.mov_txt_account}}</td>
            <td>{{m.mov_txt_account_to}}</td>
            <td>{{m.mov_txt_type}}</td>
            <td>{{m.mov_amount | currency:'MXN':'symbol-narrow':'1.2-2'}}</td>
            <td>{{m.mov_budget}}</td>
            <td>{{m.mov_txt_category}}</td>
            <td>{{m.mov_txt_place}}</td>
            <td>{{m.mov_desc}}</td>
            <td>{{m.mov_notes}}</td>
            <td>{{m.mov_txt_status}}</td>
        </tr>
    </table>
</div>